<div class="cue-selected"></div>
<header class="row">
  <div class="btn-prioritise" [class.reveal]="task.isPrioritised" (click)="togglePrioritised()">
    <md-icon *ngIf="!task.isCompleted">priority_high</md-icon>
  </div>
  <h2 class="title" (click)="toggleDetailPane()">{{task.title}}</h2>
  <div class="btn-mark-complete" (click)="toggleCompleted()">
    <md-icon *ngIf="!task.isCompleted">radio_button_unchecked</md-icon>
    <md-icon *ngIf="task.isCompleted">lens</md-icon>
  </div>
  <div class="btn-delete" (click)="remove()">
    <md-icon>close</md-icon>
  </div>
</header>
<section class="details" [class.reveal]="isExpanded">
  <div class="row">
    <md-icon class="icon-label">alarm</md-icon>
  </div>
  <md-list class="checklist">
    <md-list-item *ngFor="let item of task.checklist">
      <div class="checklist-item" [class.done]="item.isCompleted">
        <md-checkbox class="checklist-checkbox" [(ngModel)]="item.isCompleted">
          <span class="checkbox-label">{{item.title}}</span>
        </md-checkbox>
        <md-icon class="btn-delete-subtask" (click)="task.removeSubtask(item)">close</md-icon>
      </div>
    </md-list-item>
  </md-list>
  <form class="row" (submit)="addSubtask(subtask)">
    <md-icon class="icon-label">add</md-icon>
    <md-input class="input-subtask" placeholder="Add a subtask"
      [floatingPlaceholder]="false" [(ngModel)]="subtask.title"></md-input>
  </form>
  <form class="row" (submit)="addNotes(task)">
    <md-icon class="icon-label">content_paste</md-icon>
    <md-input class="input-notes" placeholder="Add notes" maxLength="150" [floatingPlaceholder]="false" [(ngModel)]="task.notes" #characterCountHint>
      <md-hint align="end">{{characterCountHint.characterCount}}/150</md-hint>  
    </md-input>    
  </form>
</section>
